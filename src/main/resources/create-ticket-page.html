<!doctype html>

<html lang="en" style="min-width:500px;>
<head>
    <meta charset="utf-8">

<title>Trello ticket creation</title>
<meta name="description" content="Trello ticket creation">
<meta name="author" content="Bongo">

<style type="text/css">
.form-style-3{
	max-width: 450px;
	font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
}
.form-style-3 label{
	display:block;
	margin-bottom: 10px;
}
.form-style-3 label > span{
	float: left;
	width: 100px;
	color: #0a8073;
	font-weight: bold;
	font-size: 13px;
	text-shadow: 1px 1px 1px #fff;
}
.form-style-3 fieldset{
	border-radius: 10px;
	-webkit-border-radius: 10px;
	-moz-border-radius: 10px;
	margin: 0px 0px 10px 0px;
	border: 1px solid #0a9176;
	padding: 20px;
	background: #f4f7f8;
	box-shadow: inset 0px 0px 15px #FFE5E5;
	-moz-box-shadow: inset 0px 0px 15px #FFE5E5;
	-webkit-box-shadow: inset 0px 0px 15px #FFE5E5;
}
.form-style-3 fieldset legend{
	color: #fff;
	border-top: 1px solid #0a9176;
	border-left: 1px solid #0a9176;
	border-right: 1px solid #0a9176;
	border-radius: 5px 5px 0px 0px;
	-webkit-border-radius: 5px 5px 0px 0px;
	-moz-border-radius: 5px 5px 0px 0px;
	background: #1abc9c;
	padding: 0px 8px 3px 8px;
	box-shadow: -0px -1px 2px #F1F1F1;
	-moz-box-shadow:-0px -1px 2px #F1F1F1;
	-webkit-box-shadow:-0px -1px 2px #F1F1F1;
	font-weight: normal;
	font-size: 12px;
}
.form-style-3 textarea{
	width:250px;
	height:100px;
}
.form-style-3 input[type=text],
.form-style-3 input[type=date],
.form-style-3 input[type=datetime],
.form-style-3 input[type=number],
.form-style-3 input[type=search],
.form-style-3 input[type=time],
.form-style-3 input[type=url],
.form-style-3 input[type=email],
.form-style-3 select,
.form-style-3 textarea{
	border-radius: 3px;
	-webkit-border-radius: 3px;
	-moz-border-radius: 3px;
	border: 1px solid #FFC2DC;
	outline: none;
	color: #8a97a0;
	padding: 5px 8px 5px 8px;
	box-shadow: inset 1px 1px 4px #FFD5E7;
	-moz-box-shadow: inset 1px 1px 4px #FFD5E7;
	-webkit-box-shadow: inset 1px 1px 4px #FFD5E7;
	background: #e8eeef;
	width:50%;
}
.form-style-3 select:focus{
	background: #d2d9dd;
}
.form-style-3  input[type=submit],
.form-style-3  button[type=submit],
.form-style-3  input[type=button]{
	background: #1abc9c;
	border: 1px solid #C94A81;
	padding: 5px 15px 5px 15px;
	color: #FFF;
	box-shadow: inset -1px -1px 3px #FF62A7;
	-moz-box-shadow: inset -1px -1px 3px #FF62A7;
	-webkit-box-shadow: inset -1px -1px 3px #FF62A7;
	border-radius: 3px;
	border-radius: 3px;
	-webkit-border-radius: 3px;
	-moz-border-radius: 3px;
	font-weight: bold;
}
.required{
	color:red;
	font-weight:normal;
}
</style>
</head>

<body min-width="100px">


    <div class="form-style-3">
        <form id="myForm" name="myForm" method="POST" action="https://sdk-test-results.herokuapp.com/create_trello_ticket">
            <fieldset><legend>Ticket data</legend>


                <label for="boards"><span>Select a board:</span>
                    <select id="boards" required name="boards" size="3">
                        <option value="JS SDKs">JS SDKs</option>
                        <option value="SDKs">SDKs</option>
                        <option value="Ultrafast Grid">Ultrafast Grid</option>
                    </select></label><br>

                <label for="ticketTitle"><span>Ticket title:</span>
                    <input type="text" id="ticketTitle" name="ticketTitle" size="80" required></label><br>

                <label for="ticketDescription"><span>Ticket description:</span>
                    <textarea name="ticketDescription" cols="60" rows="4" required></textarea></label><br>

                <label for="customerAppUrl"><span>Customer app url:</span>
                    <input type="text" id="customerAppUrl" name="customerAppUrl" size="80" required></label><br>

                <label for="sdk"><span>Select an SDK:</span>
                    <select id="sdk" required name="sdk" size="7">
                    </select></label><br>

                <label for="sdkVersion"><span>SDK version:</span>
                    <input type="text" id="sdkVersion" name="sdkVersion" required></label><br>

                <label for="linkToTestResults"><span>Link to dashboard test results:</span>
                    <input type="text" id="linkToTestResults" name="linkToTestResults" size="80" required></label><br><br>

                <label for="isAppAccessible"><span>Check if the customer app is accessible to the R&D</span><br><br>
                    <input type="checkbox" required id="isAppAccessible" name="isAppAccessible"></label><br><br><br>

                <label for="logFiles"><span>Log files:</span>
                    <input type="file" id="logFiles" name="logFiles" required multiple><br>
                    <span>Disable log upload</span><input type="checkbox" required id="isLogFileAvailable" name="isLogFileAvailable"></label><br><br>


                <label for="reproducable"><span>Reproducable:</span>
                    <input type="file" id="reproducable" name="reproducable" required multiple><br>
                    <span>Disable reproducable upload</span><input type="checkbox" required id="isReproducableAvailable" name="isReproducableAvailable"></label><br><br>

                <input type="submit" id="btn-submit" value="Create ticket" />

                <input type="hidden" id="extensionVersion" name="extensionVersion"value="1.0">


            </fieldset></form>
    </div>


<script>
    document.querySelector('#myForm').addEventListener('submit', (e) => {
        const btn = document.querySelector('#btn-submit')
        btn.disabled = true
        btn.style.background = '#C1C1C1'
    })

    document.querySelector('#isLogFileAvailable').addEventListener('change', (e) => {
        const checkBox = document.querySelector('#isLogFileAvailable')
        if (checkBox.checked) {
            const logFileUpload = document.querySelector('#logFiles')
            logFileUpload.disabled = true
          } else {
            const logFileUpload = document.querySelector('#logFiles')
            logFileUpload.disabled = false
          }
    })

    document.querySelector('#isReproducableAvailable').addEventListener('change', (e) => {
        const checkBox = document.querySelector('#isReproducableAvailable')
        if (checkBox.checked) {
            const logFileUpload = document.querySelector('#reproducable')
            logFileUpload.disabled = true
          } else {
            const logFileUpload = document.querySelector('#reproducable')
            logFileUpload.disabled = false
          }
    })

    function httpGet(theUrl)
    {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
        xmlHttp.send( null );
        return xmlHttp.responseText;
    }

    var x = document.querySelector("#sdk");
    var arrOfSdks = httpGet("https://sdk-test-results.herokuapp.com/get_list_of_sdks").split(",");

    for (i = 0; i < arrOfSdks.length; i++) {
        var option = document.createElement("option");
        option.text = arrOfSdks[i];
        option.value = arrOfSdks[i];
        x.add(option);
}
</script>
</body>
</html>